{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst SECOND = 1000;\nconst MINUTE = 60 * SECOND;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\n\nconst button = document.querySelector('.btn');\nconst datetimePicker = document.querySelector('#datetime-picker');\nconst valueDays = document.querySelector('.valueDays');\nconst valueHours = document.querySelector('.valueHours');\nconst valueMinute = document.querySelector('.valueMinute');\nconst valueSec = document.querySelector('.valueSec');\nlet intervalId;\nlet userSelectedDate = 0;\n\nfunction convertMs(ms) {\n  const days = Math.floor(ms / DAY);\n  const hours = Math.floor((ms % DAY) / HOUR);\n  const minutes = Math.floor(((ms % DAY) % HOUR) / MINUTE);\n  const seconds = Math.floor((((ms % DAY) % HOUR) % MINUTE) / SECOND);\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimeDisplay(days, hours, minutes, seconds) {\n  valueDays.innerHTML = addLeadingZero(days);\n  valueHours.innerHTML = addLeadingZero(hours);\n  valueMinute.innerHTML = addLeadingZero(minutes);\n  valueSec.innerHTML = addLeadingZero(seconds);\n}\n\nfunction updateButtonStyles() {\n  button.style.backgroundColor = 'rgb(207, 207, 207)';\n  button.style.cursor = 'default';\n  datetimePicker.style.cursor = 'default';\n}\n\nfunction disableControls() {\n  datetimePicker.setAttribute('disabled', '');\n  button.setAttribute('disabled', '');\n}\n\nfunction enableControls() {\n  datetimePicker.removeAttribute('disabled');\n  button.removeAttribute('disabled');\n}\n\nfunction handleTimerEnd() {\n  clearInterval(intervalId);\n  enableControls();\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction timeGo() {\n  updateButtonStyles();\n  disableControls();\n\n  const currentTime = Date.now();\n  const timeDifference = userSelectedDate - currentTime;\n\n  if (timeDifference <= 0) {\n    handleTimerEnd();\n    return;\n  }\n\n  const { days, hours, minutes, seconds } = convertMs(timeDifference);\n  updateTimeDisplay(days, hours, minutes, seconds);\n}\n\nbutton.addEventListener('click', () => {\n  disableControls();\n  timeGo();\n  intervalId = setInterval(timeGo, SECOND);\n});\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const timeNow = Date.parse(new Date());\n\n    if (timeNow > Date.parse(selectedDates[0])) {\n      iziToast.error({\n        backgroundColor: 'rgb(239, 64, 64)',\n        messageColor: 'white',\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      button.setAttribute('disabled', '');\n    } else {\n      userSelectedDate = Date.parse(selectedDates[0]);\n      button.removeAttribute('disabled', '');\n      button.style.backgroundColor = '#4e75ff';\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n"],"names":["SECOND","MINUTE","HOUR","DAY","button","datetimePicker","valueDays","valueHours","valueMinute","valueSec","intervalId","userSelectedDate","convertMs","ms","days","hours","minutes","seconds","updateTimeDisplay","addLeadingZero","updateButtonStyles","disableControls","enableControls","handleTimerEnd","value","timeGo","currentTime","timeDifference","options","selectedDates","iziToast","flatpickr"],"mappings":"+IASA,MAAMA,EAAS,IACTC,EAAS,GAAKD,EACdE,EAAO,GAAKD,EACZE,EAAM,GAAKD,EAEXE,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,WAAW,EACnD,IAAIC,EACAC,EAAmB,EAEvB,SAASC,EAAUC,EAAI,CACrB,MAAMC,EAAO,KAAK,MAAMD,EAAKV,CAAG,EAC1BY,EAAQ,KAAK,MAAOF,EAAKV,EAAOD,CAAI,EACpCc,EAAU,KAAK,MAAQH,EAAKV,EAAOD,EAAQD,CAAM,EACjDgB,EAAU,KAAK,MAASJ,EAAKV,EAAOD,EAAQD,EAAUD,CAAM,EAClE,MAAO,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAkBJ,EAAMC,EAAOC,EAASC,EAAS,CACxDX,EAAU,UAAYa,EAAeL,CAAI,EACzCP,EAAW,UAAYY,EAAeJ,CAAK,EAC3CP,EAAY,UAAYW,EAAeH,CAAO,EAC9CP,EAAS,UAAYU,EAAeF,CAAO,CAC7C,CAEA,SAASG,GAAqB,CAC5BhB,EAAO,MAAM,gBAAkB,qBAC/BA,EAAO,MAAM,OAAS,UACtBC,EAAe,MAAM,OAAS,SAChC,CAEA,SAASgB,GAAkB,CACzBhB,EAAe,aAAa,WAAY,EAAE,EAC1CD,EAAO,aAAa,WAAY,EAAE,CACpC,CAEA,SAASkB,GAAiB,CACxBjB,EAAe,gBAAgB,UAAU,EACzCD,EAAO,gBAAgB,UAAU,CACnC,CAEA,SAASmB,GAAiB,CACxB,cAAcb,CAAU,EACxBY,GACF,CAEA,SAASH,EAAeK,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASC,GAAS,CAChBL,IACAC,IAEA,MAAMK,EAAc,KAAK,MACnBC,EAAiBhB,EAAmBe,EAE1C,GAAIC,GAAkB,EAAG,CACvBJ,IACA,MACD,CAED,KAAM,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUe,CAAc,EAClET,EAAkBJ,EAAMC,EAAOC,EAASC,CAAO,CACjD,CAEAb,EAAO,iBAAiB,QAAS,IAAM,CACrCiB,IACAI,IACAf,EAAa,YAAYe,EAAQzB,CAAM,CACzC,CAAC,EAED,MAAM4B,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACL,KAAK,MAAM,IAAI,IAAM,EAEvB,KAAK,MAAMA,EAAc,CAAC,CAAC,GACvCC,EAAS,MAAM,CACb,gBAAiB,mBACjB,aAAc,QACd,QAAS,qCACT,SAAU,UAClB,CAAO,EACD1B,EAAO,aAAa,WAAY,EAAE,IAElCO,EAAmB,KAAK,MAAMkB,EAAc,CAAC,CAAC,EAC9CzB,EAAO,gBAAgB,WAAY,EAAE,EACrCA,EAAO,MAAM,gBAAkB,UAElC,CACH,EAEA2B,EAAU,mBAAoBH,CAAO"}